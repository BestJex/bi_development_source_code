# bianwu

一. 修改数据库配置文件,项目bianwu-db/src/main/resources/application-db.yml
  1、将spring:ssh2的值修改成false，服务器不需要SSH登陆
    ssh2:
      if-load: false
  2、将数据库连接修改成:
      url: jdbc:mysql://rm-2zegi47bkhg943qy6.mysql.rds.aliyuncs.com:3306/rdj-erp_200318?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC&allowPublicKeyRetrieval=true&verifyServerCertificate=false&useSSL=false&allowMultiQueries=true
      username: rdjerp
      password: rdj200318ERP
二、修改服务器端口bianwu-all/src/main/resources/application.yml
    server:
       port: 8810
三、修改 admin-web/config/dep.env.js
    BASE_API: '"http://47.95.205.103:8810/admin"'
    
四、修改 bianwu-core/application-core.yml
    storage:
       # 当前工作的对象存储模式，分别是local、aliyun、tencent
       active: local
       # 本地对象存储配置信息
       local:
         storagePath: storage
         address: http://47.95.205.103:8810/admin/storage/fetch/

五、打包
        ```
        cd admin-web
        cnpm install #如果有新增组件，则执行
        cnpm run build:dep
        
        cd ..
        mvn clean package
        打包文件位于 bianwu-all/target下
        ```
        //如果在Linux下，用以下命令方式启动
        nohup java -jar --servercd.port=8810 litemall.jar & 
                
        如果是在Windows下，可以直接用命令方式启动：
        java -jar bianwu.jar --servercd.port=8810
五、上传服务器，发布
  
  在服务器上安装Java JDK 只需要一条命令就可以安装jdk：
     yum install java-1.8.0-openjdk* -y
  执行过这条命令无需配置，直接可以使用。
  
  
  移动端的发布:
  1、先在服务器上安装Nginx，在Centos上，通过命令:
  yum install nginx
  2、默认安装后，配置/etc/nginx/nginx.conf
    server {
        listen 8850;
        server_name 47.95.205.103:8850;
        root /opt/rdjBianWu/h5;
        index index.html;
    
        location / {
        }
    }
  3、保存后退出
    nginx -t;//测试是否通过
    nginx -c /etc/nginx/nginx.conf;
    nginx -s reload;


发布测试版本时需要注意：
  1、改数据库连接方式
  2、修改前端admin-web/config下的dep.env.js设置
  　　BASE_API: '"http://123.57.181.101:8810/admin"'
  3、修改bianwu-core中的resource中的application-core.yml中的设置
       将存储 storage:
         # 当前工作的对象存储模式，分别是local、aliyun、tencent
         active: local
         # 本地对象存储配置信息
         local:
           storagePath: storage
           address: http://123.57.181.101:8810/admin/storage/fetch/
